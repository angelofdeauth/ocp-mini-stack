# dhcpd.conf
# Depends:
# - /var/lib/dhcpd/dhcpd.leases
# - /etc/dhcpd.d/*.libvirt
#################################################################################
# Libvirt node configurations
bootstrap {  
  include "/etc/dhcp/bootstrap.pxe";
  filename "lpxelinux.0";
  option pxelinux.pathprefix "ocp"
  option pxelinux.configfile "bootstrap"
}

master {  
  filename "master/lpxelinux.0";
  include "/etc/dhcp/master.pxe";
}

worker {  
  filename "compute/lpxelinux.0";
  include "/etc/dhcp/worker.pxe";
}

#################################################################################
# General Network `ocp-mini-stack` Configuration
ocp-mini-stack {
  option routers 172.10.0.1;
  option domain-name "ocp.ministack.dev";
  option domain-search "ocp.ministack.dev";
  option domain-name-servers 8.8.8.8, 8.8.4.4;
  option domain-name-servers 172.10.0.3;
  option broadcast-address 172.10.255.255;
  option subnet-mask 255.255.0.0;
  next-server 172.10.0.2;
  default-lease-time 600;
  max-lease-time 7200;
  authoritative;
  ping-check = 1;
  subnet 172.10.0.0 netmask 255.255.0.0 {
    range 172.10.10.100 10.250.12.200;
    filename "bootstrap/gpxelinux.0";
  }
}

#################################################################################
# General Settings
allow bootp;
allow booting;
authoritative;
max-lease-time 7200;
default-lease-time 600;
ddns-update-style none;

#################################################################################
# Investigate
# https://www.ibm.com/support/knowledgecenter/SS3HLM_7.1.1.4/com.ibm.tivoli.tpm.osd.doc_7.1.1.4/install/rosd_dhcpdconfexample.html
# https://www.syslinux.org/old/pxe.php
