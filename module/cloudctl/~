#!/bin/bash
dir_OCP4_PROFILE=${HOME}/.ccio/ocp4-mini-stack/
rm -rf ${dir_OCP4_PROFILE} 2>/dev/null
mkdir -p ${dir_OCP4_PROFILE} 2>/dev/null

write_install_config () {
cat <<EOF >${dir_IGN}/install-config.yaml
apiVersion: v1
baseDomain: ministack.dev
compute:
- hyperthreading: Enabled   
  name: worker
  replicas: 0 
controlPlane:
  hyperthreading: Enabled   
  name: master 
  replicas: 3 
metadata:
  name: ocp4 
networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14 
    hostPrefix: 23 
  networkType: OpenShiftSDN
  serviceNetwork: 
  - 172.30.0.0/16
platform:
  none: {} 
pullSecret: ${secret_PULLSECRET}
sshKey: ${secret_SSHPUBKEY}
EOF
cd ${dir_START}
}
